# WebRTC SIP Client Chrome Extension

## Project Overview
This project is a Chrome extension that provides a WebRTC-based SIP client for making and receiving voice calls directly from the browser. It uses the SIP.js library to handle SIP protocol communication and WebRTC for media handling.

## Features
- SIP registration and authentication
- Making outbound calls
- Receiving inbound calls
- Basic call controls (answer, reject, hang up)
- Connection status display
- Chrome extension integration with storage and permissions APIs
- Automatic microphone permission handling

## Directory Structure
- `/` - Root directory containing the main application files
  - `manifest.json` - Chrome extension manifest file
  - `popup.html` - The main extension popup interface
  - `/js` - JavaScript files
    - `sip-client.js` - Core SIP client implementation
    - `sip-0.21.2.min.js` - SIP.js library (minified)
    - `background.js` - Chrome extension background service worker
  - `/css` - Stylesheets
    - `style.css` - Styling for the extension
  - `/icons` - Directory containing extension icons
    - `icon16.png` - 16x16 icon for the extension

## Prerequisites
- Google Chrome browser
- A SIP account with a SIP server that supports WebSocket connections
- Microphone access permissions

## Installation
1. Clone or download this repository
2. Open Chrome and navigate to `chrome://extensions/`
3. Enable "Developer mode" (toggle in the top-right corner)
4. Click "Load unpacked" and select the directory containing this extension

## Configuration
The extension requires the following configuration:
- SIP Server: The domain of your SIP server
- WebSocket URL: The WebSocket endpoint of your SIP server (typically wss://server:port/ws)
- Username: Your SIP account username
- Password: Your SIP account password
- Display Name: Your name to display to others (optional)

## Usage
1. Click on the extension icon in Chrome to open the popup
2. Enter your SIP server details and credentials
3. Click "Connect" to register with the SIP server
4. Once connected, you can make calls by entering a destination and clicking "Call"
5. For incoming calls, use the "Answer" or "Reject" buttons

## Key Files
- `popup.html`: Contains the user interface elements for the extension popup
- `sip-client.js`: Contains the core functionality for SIP communication, including:
  - Connection management
  - Call handling
  - UI state management

## Key Functions
- `connect()`: Establishes connection to the SIP server and registers the user
- `makeCall()`: Initiates an outbound call to a specified destination
- `answer()`: Answers an incoming call
- `hangup()`: Ends the current call
- `disconnect()`: Unregisters from the SIP server and closes the connection

## Pending Features
- Settings page for connection and media configuration
- Additional icon sizes (48px and 128px)
- Improved error handling and notifications
- Automated testing

## Known Issues
- Microphone access may be denied, requiring proper permissions setup
- The extension includes a key file that should be removed for distribution
